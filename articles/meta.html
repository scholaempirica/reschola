<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Developing this package further • reschola</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Developing this package further">
<meta property="og:description" content="reschola">
<meta property="og:image" content="https://scholaempirica.github.io/reschola/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reschola</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/reschola.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    How-to's
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/setup.html">Setup</a>
    </li>
    <li>
      <a href="../articles/tips.html">Tips and tricks</a>
    </li>
    <li>
      <a href="../articles/workflow.html">The Workflow</a>
    </li>
    <li>
      <a href="../articles/charts.html">Making charts</a>
    </li>
    <li>
      <a href="../articles/meta.html">Keeping this package up to scratch</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">What's new</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/scholaempirica/reschola/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/scholaempirica/reschola/issues">
    <span class="fa fa-exclamation-circle fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="meta_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="meta_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="meta_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Developing this package further</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/scholaempirica/reschola/blob/master/vignettes/meta.Rmd"><code>vignettes/meta.Rmd</code></a></small>
      <div class="hidden name"><code>meta.Rmd</code></div>

    </div>

    
    
<p>This package should be a living, evolving tool and a set of living documents. This vignette describes how this package is being developed and thus how it can be extended and updated.</p>
<div id="development-process" class="section level2">
<h2 class="hasAnchor">
<a href="#development-process" class="anchor"></a>Development process</h2>
<p>This package is being developed on Github using the workflow suggested <a href="https://ropensci.org/technotes/2019/12/08/precompute-vignettes/">Hadley Wickham’s R Packages book</a> and implemented by the <a href="https://github.com/r-lib/usethis"><code>usethis</code></a> package.</p>
<p>The development roadmap is stored in a primitive form in <a href="https://github.com/scholaempirica/reschola/issues">Github Issues</a>.</p>
<p>Releases (of the source package only) are made available in the Relaeses part of Github, meaning a last stable release can be installed using e.g. <code><a href="https://remotes.r-lib.org/reference/install_github.html">remotes::install_github("scholaempirica/reschola", ref = github_release())</a></code> regardless of how messy the current state of the repository master branch is.</p>
<p>Big changes or new features should be built in branches.</p>
<div id="dependencies" class="section level3">
<h3 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h3>
<p>Try to use as few as is reasonable; avoid obscure ones. Prefer CRAN releases.</p>
<p>Prefer versions where CRAN binaries are available for all platforms.</p>
<p>An exception currently is <code>redoc</code>, which is early stages and we even use a custom patch, but that is because it provides key functionality we cannot get otherwise.</p>
</div>
<div id="quality-assurance" class="section level3">
<h3 class="hasAnchor">
<a href="#quality-assurance" class="anchor"></a>Quality assurance</h3>
<p><a href="https://github.com/lorenzwalthert/precommit">Pre-commit checks</a> are used to ensure that broken code is not committed.</p>
<div id="checks-continuous-integration" class="section level4">
<h4 class="hasAnchor">
<a href="#checks-continuous-integration" class="anchor"></a>Checks / Continuous integration</h4>
<p>Commits are only pushed when they pass local R CMD checks with no errors or warnings. Checks are then run on Travis on an Ubuntu system as part of building the website. For releases (e.g. v0.1.0) checks are run on <a href="https://builder.r-hub.io/">r-hub</a>.</p>
<p>An exception to the automatic continuous integration and check pipeline is the <code>chart.Rmd</code> vignette, which is prebuilt locally using <code>vignettes/prebuild.r</code> from <code>charts.Rmd.orig</code> to ensure fonts are used correctly. (The approach is taken from ropensci as described in <a href="https://ropensci.org/technotes/2019/12/08/precompute-vignettes/">this blog post</a> and applied in <a href="https://github.com/ropensci/eia/blob/master/vignettes/">this package</a>)</p>
</div>
<div id="test-coverage" class="section level4">
<h4 class="hasAnchor">
<a href="#test-coverage" class="anchor"></a>Test coverage</h4>
<p>Currently no tests are included or test coverage tracked, but vignettes are written so as to cover and implicitly test the basic functionality of the package.</p>
</div>
</div>
<div id="making-package-binaries-available" class="section level3">
<h3 class="hasAnchor">
<a href="#making-package-binaries-available" class="anchor"></a>Making package binaries available</h3>
<p>MacOS and Windows binaries of stable (minor and patch, so X.Y.0 and X.Y.Z where Z != 9000) releases are made available on the <a href="https://scholaempirica.github.io/drat">Schola drat</a> package repository. This is done manually, using the <code>ptrr::insert_package_into_drat()</code> utility in the <code>ptrr</code> package but can be without it by downloading built binaries output by r-hub and inserting them into the <code>gh-pages</code> branch of the <code>drat</code> Github repository using the <code>drat</code> package.</p>
<p>See installation instructions in README.md for how to install these binaries.</p>
</div>
</div>
<div id="online-documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#online-documentation" class="anchor"></a>Online documentation</h2>
<p>The continuous integration pipeline (Travis CI and Github Pages) means that whenever code is pushed to Github, the documentation of the package is converted to a website by the <code>pkgdown</code> package and published on <a href="https://scholaempirica.github.io/reschola">scholaempirica.github.io/reschola</a> via the <code>gh-pages</code> branch of the repository.</p>
</div>
<div id="future-proofing-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#future-proofing-the-package" class="anchor"></a>Future-proofing the package</h2>
<p>There are three areas where I think future developments might make the package fragile:</p>
<ol style="list-style-type: decimal">
<li>R 4.0: let’s test when it is released and update if needed</li>
<li>redoc: we currently use a “frozen” fork with some quick fixes; if the author accepts those fixes or develops the package further, we should switch how that dependency is recorded and update other code in the package and its documentation as needed</li>
<li>The website: the Travis CI service sometimes acts funny, particularly when authenticating to Github. The recommended practice of running the checks and website build process on Github Actions is not available as GH Actions throws an error, possibly related to the non-standard redoc dependency. If a workflow becomes available for GH Actions that handles this, we can move it over.</li>
</ol>
</div>
<div id="reusingreshaping-the-documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#reusingreshaping-the-documentation" class="anchor"></a>Reusing/reshaping the documentation</h2>
<div id="making-changes" class="section level3">
<h3 class="hasAnchor">
<a href="#making-changes" class="anchor"></a>Making changes</h3>
<p>In principle, small changes (e.g. correcting typos) can be made in the web interface on Github by any member of the scholaempirica Github team. This is done by going to the relevant file on Github, clicking the pencil icon, and editing the text. When saving changes, Github prompts you to make a commit, which triggers a rebuild and republish of the web documentation.</p>
<p>Function documentation is contained in the functions’ R files in <code>R/</code>, vignettes are in <code>/vignettes</code>. The <code>charts.Rmd</code>/<code>charts.Rmd.orig</code> vignette requires special treatment - see <a href="#checks-continuous-integration">above</a>.</p>
<p>Big changes should be done after cloning the repo and opening in RStudio, ideally on a separate branch.</p>
</div>
<div id="reusing" class="section level3">
<h3 class="hasAnchor">
<a href="#reusing" class="anchor"></a>Reusing</h3>
<p>The vignettes are in principle Rmd files with a special YAML header so can be reused and republished anywhere and in any format if needed.</p>
</div>
</div>
<div id="how-to-change-key-parts" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-change-key-parts" class="anchor"></a>How to change key parts</h2>
<ul>
<li>word template styles: use Word to open and edit styles in <code>template.docx</code> in <code>inst/rmarkdown/templates/schola_*/resources/</code>; edit each one separately (do not copy one file to another folder as <code>redoc</code> has special parts in the <code>docx</code> file).</li>
<li>text in articles/vignettes: <code>vignettes/*.Rmd</code>
</li>
<li>default content of Rmarkdown files created from <code>reschola</code> templates: <code>inst/rmarkdown/templates/schola_*/skeleton/skeleton.Rmd</code>
</li>
<li>Rmarkdown templates knitr param defaults: look at the <code>base$knitr$opts_chunk</code> bits in <code>R/rmarkdown_output.R</code>
</li>
<li>behaviour of project template: <code>inst/rstudio/templates/project</code> and <code>R/rstudio_project_bindings.R</code>; consult <a href="https://rstudio.github.io/rstudio-extensions/rstudio_project_templates.html" class="uri">https://rstudio.github.io/rstudio-extensions/rstudio_project_templates.html</a>. <code>inst/rstudio/templates/project/schola_project.dcf</code> sets up the dialog and lists files which will be opened in the new project</li>
<li>text of function documentation: always next to each function in <code>R/{function_name/group}.R</code>; consult <a href="https://r-pkgs.org/man.html" class="uri">https://r-pkgs.org/man.html</a> on documenting things.</li>
<li>font defaults: look through <code>R/fonts.R</code>
</li>
</ul>
</div>
<div id="resources-and-acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#resources-and-acknowledgements" class="anchor"></a>Resources and acknowledgements</h2>
<p>The package architecture and many components draw heavily on <a href="https://github.com/atlas-aai/ratlas"><code>ratlas</code></a> by <span class="citation">@ratlas-aai</span>/<span class="citation">@wjakethompson</span> (Jake Thompson), and on <a href="https://github.com/hrbrmstr/hrbrthemes"><code>hrbrthemes</code></a> by Bob Rudis (<span class="citation">@hrbrmstr</span>).</p>
<p>You can see Jake’s Rstudio::conf talk on <code>ratlas</code> at <a href="https://resources.rstudio.com/rstudio-conf-2020/branding-and-packaging-reports-with-r-markdown-jake-thompson" class="uri">https://resources.rstudio.com/rstudio-conf-2020/branding-and-packaging-reports-with-r-markdown-jake-thompson</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Petr Bouchal, Schola Empirica.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '273d98fffff3ca7ed9727d978a8645c1',
    indexName: 'reschola',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
